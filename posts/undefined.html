<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/img/medium.jpeg">
  <link rel="icon" type="image/png" sizes="16x16" href="/img/small.jpg">
  <link rel="mask-icon" href="/img/author.jpg" color="#222">
  <meta name="msvalidate.01" content="bing_site_verification">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"blog.nbplus.eu.org","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.12.2","exturl":true,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"Muse | Mist":280,"onmobile":false},"copycode":{"enable":true,"style":"mac","show_result":true},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true}}</script><script src="/js/config.js"></script>

    <meta name="description" content="上一篇文章发出来太艰难了，hexo更新后对url的要求变得极其严格。导致hexo g时出现了ERR_INVALID_URL。 而且！！有时候它会不告诉你报错内容在哪里！！极其恶心，今天花了两个小时解决这个问题，全程和gemini讨论，最终解决。实在应该记录一下，要不然之后又忘了怎么解决了。本人经过两个小时的摧残，已经几近爆炸，因此下文全篇由和我对话，帮我解决此问题的的Gemini记录。">
<meta property="og:type" content="article">
<meta property="og:title" content="博客踩坑与重生：解决无提示错误ERR_INVALID_URL">
<meta property="og:url" content="https://blog.nbplus.eu.org/posts/undefined.html">
<meta property="og:site_name" content="晴雀堂">
<meta property="og:description" content="上一篇文章发出来太艰难了，hexo更新后对url的要求变得极其严格。导致hexo g时出现了ERR_INVALID_URL。 而且！！有时候它会不告诉你报错内容在哪里！！极其恶心，今天花了两个小时解决这个问题，全程和gemini讨论，最终解决。实在应该记录一下，要不然之后又忘了怎么解决了。本人经过两个小时的摧残，已经几近爆炸，因此下文全篇由和我对话，帮我解决此问题的的Gemini记录。">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-05-11T14:55:06.000Z">
<meta property="article:modified_time" content="2025-05-11T08:20:28.447Z">
<meta property="article:author" content="晴雀">
<meta property="article:tag" content="晴雀">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://blog.nbplus.eu.org/posts/undefined.html">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://blog.nbplus.eu.org/posts/undefined.html","path":"posts/undefined.html","title":"博客踩坑与重生：解决无提示错误ERR_INVALID_URL"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>博客踩坑与重生：解决无提示错误ERR_INVALID_URL | 晴雀堂</title>
  




<link rel="dns-prefetch" href="waline.nbplus.eu.org"><!--欢迎来到我的博客~话说为啥要看源码捏？-->
<div class="top-scroll-bar"></div>
<!--使用umami统计，尊重访客隐私^-^-->
<script defer src="https://u.nbplus.eu.org/script.js" data-website-id="061f90c5-2d4f-428f-be7c-40f5a99113b4"></script>
<!--引入字体-->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-webfont@1.7.0/style.css" />
<meta name="msvalidate.01" content="AAFE56EEF8D0968CC1BC842FCE4448F5" />
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="晴雀堂" type="application/atom+xml">
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">晴雀堂</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">晴雀的个人博客</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-links"><a href="/links/" rel="section"><i class="fa fa-link fa-fw"></i>友链</a></li><li class="menu-item menu-item-bb"><a href="/bb/" rel="section"><i class="fa fa-comment fa-fw"></i>哔哔</a></li><li class="menu-item menu-item-traveling"><span class="exturl" data-url="aHR0cHM6Ly93d3cudHJhdmVsbGluZ3MuY24vZ28uaHRtbA=="><i class="fa fa-subway fa-fw"></i>开往</span></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%BF%83%E8%B7%AF%E5%8E%86%E7%A8%8B"><span class="nav-number">1.</span> <span class="nav-text">心路历程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Hexo-%E5%8D%9A%E5%AE%A2%E8%B8%A9%E5%9D%91%E4%B8%8E%E9%87%8D%E7%94%9F%EF%BC%9A%E4%BB%8E-ECONNREFUSED-%E5%88%B0-ERR-INVALID-URL-%E5%86%8D%E5%88%B0-Git-Submodule-%E7%96%91%E4%BA%91%E7%9A%84%E5%AE%8C%E6%95%B4%E6%8E%92%E6%9F%A5%E5%AE%9E%E5%BD%95"><span class="nav-number">1.1.</span> <span class="nav-text">Hexo 博客踩坑与重生：从 ECONNREFUSED 到 ERR_INVALID_URL 再到 Git Submodule 疑云的完整排查实录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E4%B8%80%EF%BC%9Anpm-%E5%AE%89%E8%A3%85-Hexo-%E5%A4%B1%E8%B4%A5-ECONNREFUSED"><span class="nav-number">1.2.</span> <span class="nav-text">问题一：npm 安装 Hexo 失败 - ECONNREFUSED</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%EF%BC%9A%E6%B8%85%E9%99%A4-npm-%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE"><span class="nav-number">1.2.1.</span> <span class="nav-text">解决方案：清除 npm 代理配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E4%BA%8C%EF%BC%9Ahexo-g-d-%E5%A4%B1%E8%B4%A5-ERR-INVALID-URL"><span class="nav-number">1.3.</span> <span class="nav-text">问题二：hexo g -d 失败 - ERR_INVALID_URL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%B1%E5%85%A5%E6%8E%92%E6%9F%A5%EF%BC%9A%E4%BD%BF%E7%94%A8-console-log-%E5%A4%A7%E6%B3%95"><span class="nav-number">1.3.1.</span> <span class="nav-text">深入排查：使用 console.log 大法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BD%AC%E6%9C%BA%EF%BC%9AGitHub-Codespaces-%E7%9A%84%E7%BA%AF%E5%87%80%E7%8E%AF%E5%A2%83"><span class="nav-number">1.3.2.</span> <span class="nav-text">转机：GitHub Codespaces 的纯净环境</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E4%BD%8D%E9%97%AE%E9%A2%98URL"><span class="nav-number">1.3.3.</span> <span class="nav-text">定位问题URL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%EF%BC%9A%E4%BF%AE%E6%AD%A3%E6%96%87%E7%AB%A0%E4%B8%AD%E7%9A%84%E6%97%A0%E6%95%88%E9%93%BE%E6%8E%A5"><span class="nav-number">1.3.4.</span> <span class="nav-text">解决方案：修正文章中的无效链接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E4%B8%89%EF%BC%9Ahexo-d-%E9%83%A8%E7%BD%B2%E5%A4%B1%E8%B4%A5-Git-Submodule-%E9%97%AE%E9%A2%98"><span class="nav-number">1.3.5.</span> <span class="nav-text">问题三：hexo d 部署失败 - Git Submodule 问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%EF%BC%9A%E7%A7%BB%E9%99%A4%E9%94%99%E8%AF%AF%E7%9A%84%E5%AD%90%E6%A8%A1%E5%9D%97%E5%BC%95%E7%94%A8%E5%B9%B6%E8%AE%A9-Hexo%E9%87%8D%E6%96%B0%E7%AE%A1%E7%90%86%E9%83%A8%E7%BD%B2%E7%9B%AE%E5%BD%95"><span class="nav-number">1.3.6.</span> <span class="nav-text">解决方案：移除错误的子模块引用并让 Hexo重新管理部署目录</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93%E4%B8%8E%E6%84%9F%E6%82%9F"><span class="nav-number">1.4.</span> <span class="nav-text">总结与感悟</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="nav-number">2.</span> <span class="nav-text">解决方案</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%97%AE%E9%A2%98%E4%BA%8C%EF%BC%9Ahexo-g-d-%E5%A4%B1%E8%B4%A5-ERR-INVALID-URL-%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="nav-number">2.1.</span> <span class="nav-text">问题二：hexo g -d 失败 - ERR_INVALID_URL 的解决方案</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BB%93%E8%AF%AD"><span class="nav-number">3.</span> <span class="nav-text">结语</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="晴雀"
      src="/img/author.jpg">
  <p class="site-author-name" itemprop="name">晴雀</p>
  <div class="site-description" itemprop="description">天行健，君子以自强不息</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">72</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2hlaHlzaA==" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hehysh"><i class="fab fa-github fa-fw"></i>GitHub</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9zdGVhbWNvbW11bml0eS5jb20vcHJvZmlsZXMvNzY1NjExOTk2NjA4ODQ0OTMv" title="Steam → https:&#x2F;&#x2F;steamcommunity.com&#x2F;profiles&#x2F;76561199660884493&#x2F;"><i class="fab fa-steam fa-fw"></i>Steam</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly91Lm5icGx1cy5ldS5vcmcvc2hhcmUvNnJsb0ZyUllqVDNaQWhPMC9ibG9nLm5icGx1cy5ldS5vcmc=" title="统计 → https:&#x2F;&#x2F;u.nbplus.eu.org&#x2F;share&#x2F;6rloFrRYjT3ZAhO0&#x2F;blog.nbplus.eu.org"><i class="fa fa-bar-chart fa-fw"></i>统计</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9zLm5icGx1cy5ldS5vcmcv" title="监测 → https:&#x2F;&#x2F;s.nbplus.eu.org&#x2F;"><i class="fa fa-eye fa-fw"></i>监测</span>
      </span>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-chevron-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.nbplus.eu.org/posts/undefined.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/img/author.jpg">
      <meta itemprop="name" content="晴雀">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="晴雀堂">
      <meta itemprop="description" content="天行健，君子以自强不息">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="博客踩坑与重生：解决无提示错误ERR_INVALID_URL | 晴雀堂">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          博客踩坑与重生：解决无提示错误ERR_INVALID_URL
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-05-11 14:55:06" itemprop="dateCreated datePublished" datetime="2025-05-11T14:55:06+00:00">2025-05-11</time>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/posts/undefined.html#waline" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" data-path="/posts/undefined.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  <!--
<div class="post-ai" onclick="geminiAI()">
  <img alt="Static Badge" src="https://api-shields.edui.fun/badge/Gemini-文章摘要-blue.svg?logo=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZmZmZiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiIGQ9Im0yMS42NCAzLjY0bC0xLjI4LTEuMjhhMS4yMSAxLjIxIDAgMCAwLTEuNzIgMEwyLjM2IDE4LjY0YTEuMjEgMS4yMSAwIDAgMCAwIDEuNzJsMS4yOCAxLjI4YTEuMiAxLjIgMCAwIDAgMS43MiAwTDIxLjY0IDUuMzZhMS4yIDEuMiAwIDAgMCAwLTEuNzJNMTQgN2wzIDNNNSA2djRtMTQgNHY0TTEwIDJ2Mk03IDhIM20xOCA4aC00TTExIDNIOSIvPjwvc3ZnPg==">
</div>
<style>
@keyframes spin { from {transform: rotate(0deg);}to {transform: rotate(360deg);} }
.post-ai-result svg{animation: spin 1s infinite linear;}
</style>
<script>
async function geminiAI() {
  let postAI = document.querySelector(".post-ai");
  let postTile = document.querySelector("h1.post-title").textContent;
  postAI.insertAdjacentHTML('afterend', '<div class="post-ai-result"><svg ...></svg></div>');
  postAI.classList.add("noclick");
  
  let GeminiFetch = "https://api-gemini.nbplus.eu.org/v1/chat/completions/";
  
  try {
    let postAIResult = document.querySelector(".post-ai-result");
    let input = document.querySelector(".post-content").textContent;
    input = input.replace(/\n/g, '').replace(/[ ]+/g, ' ').replace(/<pre>[\s\S]*?<\/pre>/g, '').substring(0, 30000);
    let toAI = `文章标题：${postTile}，具体内容：${input}`;
    const res = await fetch(GeminiFetch, {
      headers: {
        'Content-Type': 'application/json',
        'Authorization': 'AIzaSyDzPmfr5E_zWsBWCd4u2tZLC_eTQEMwoCY'
      },
      method: 'POST', 
      body: JSON.stringify({
        model: 'gemini-pro',
        messages: [
          { role: 'system',content:`You are a highly skilled AI trained in language comprehension and summarization. I would like you to read the text delimited by triple quotes and summarize it into a concise abstract paragraph. Aim to retain the most important points, providing a coherent and readable summary that could help a person understand the main points of the discussion without needing to read the entire text. Please avoid unnecessary details or tangential points.
          Only give me the output and nothing else. Do not wrap responses in quotes. Respond in the Chinese language.`},
          { role: 'user', content: toAI } 
        ],
        temperature: 0.7,
      })
    })

    const data = await res.json();
    if (data.choices && data.choices[0] && data.choices[0].message) {
      postAIResult.textContent = data.choices[0].message.content;
    }
    
  } catch (error) {
    console.error('API Error:', error);
    if (postAIResult) postAIResult.remove();
  } finally {
    if (postAI) postAI.classList.remove("noclick");
  }
}
</script>

-->
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>18k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>16 分钟</span>
    </span>
</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>上一篇文章发出来太艰难了，hexo更新后对url的要求变得极其严格。导致hexo g时出现了ERR_INVALID_URL。</p>
<p>而且！！有时候它会不告诉你报错内容在哪里！！极其恶心，今天花了两个小时解决这个问题，全程和gemini讨论，最终解决。实在应该记录一下，要不然之后又忘了怎么解决了。本人经过两个小时的摧残，已经几近爆炸，因此下文全篇由和我对话，帮我解决此问题的的Gemini记录。</p>
<span id="more"></span>
<p>不想看本人心路历程直接看解决方案的跳到解决方案。</p>
<h1 id="心路历程"><a href="#心路历程" class="headerlink" title="心路历程"></a>心路历程</h1><h2 id="Hexo-博客踩坑与重生：从-ECONNREFUSED-到-ERR-INVALID-URL-再到-Git-Submodule-疑云的完整排查实录"><a href="#Hexo-博客踩坑与重生：从-ECONNREFUSED-到-ERR-INVALID-URL-再到-Git-Submodule-疑云的完整排查实录" class="headerlink" title="Hexo 博客踩坑与重生：从 ECONNREFUSED 到 ERR_INVALID_URL 再到 Git Submodule 疑云的完整排查实录"></a>Hexo 博客踩坑与重生：从 ECONNREFUSED 到 ERR_INVALID_URL 再到 Git Submodule 疑云的完整排查实录</h2><p>大家好，我是晴雀。最近在折腾我的 Hexo 博客时，遇到了一连串棘手的问题，一度让我非常头疼。从 npm 安装时的网络连接被拒，到生成静态文件时的无效 URL 错误，再到部署阶段的 Git 子模块迷局，每一个都堪称拦路虎。不过，经过一番系统的排查和不懈的努力，这些问题最终都得到了解决。我把整个过程详细记录下来，希望能给遇到类似问题的朋友们提供一些借鉴和思路。</p>
<h2 id="问题一：npm-安装-Hexo-失败-ECONNREFUSED"><a href="#问题一：npm-安装-Hexo-失败-ECONNREFUSED" class="headerlink" title="问题一：npm 安装 Hexo 失败 - ECONNREFUSED"></a>问题一：npm 安装 Hexo 失败 - <code>ECONNREFUSED</code></h2><p>一切的开始，是我尝试安装 Hexo 命令行工具。当我信心满满地敲下 <code>npm i hexo</code> 时，终端却无情地抛出了错误：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo</span><br><span class="line">npm ERR! code ECONNREFUSED</span><br><span class="line">npm ERR! syscall connect</span><br><span class="line">npm ERR! errno ECONNREFUSED</span><br><span class="line">npm ERR! FetchError: request to [https://registry.npmmirror.com/hexo](https://registry.npmmirror.com/hexo) failed, reason: connect ECONNREFUSED 127.0.0.1:12334</span><br><span class="line">npm ERR!      at ClientRequest.&lt;anonymous&gt; (C:\Users\ThinkPad\AppData\Roaming\nvm\v21.7.3\node_modules\npm\node_modules\minipass-fetch\lib\index.js:130:14)</span><br><span class="line">npm ERR!      at ClientRequest.emit (node:events:519:28)</span><br><span class="line">npm ERR!      at _destroy (node:_http_client:880:13)</span><br><span class="line">npm ERR!      at onSocketNT (node:_http_client:900:5)</span><br><span class="line">npm ERR!      at process.processTicksAndRejections (node:internal/process/task_queues:83:21)</span><br><span class="line">npm ERR!  FetchError: request to [https://registry.npmmirror.com/hexo](https://registry.npmmirror.com/hexo) failed, reason: connect ECONNREFUSED 127.0.0.1:12334</span><br><span class="line">npm ERR!      at ClientRequest.&lt;anonymous&gt; (C:\Users\ThinkPad\AppData\Roaming\nvm\v21.7.3\node_modules\npm\node_modules\minipass-fetch\lib\index.js:130:14)</span><br><span class="line">npm ERR!      at ClientRequest.emit (node:events:519:28)</span><br><span class="line">npm ERR!      at _destroy (node:_http_client:880:13)</span><br><span class="line">npm ERR!      at onSocketNT (node:_http_client:900:5)</span><br><span class="line">npm ERR!      at process.processTicksAndRejections (node:internal/process/task_queues:83:21) &#123;</span><br><span class="line">npm ERR!    code: &#x27;ECONNREFUSED&#x27;,</span><br><span class="line">npm ERR!    errno: &#x27;ECONNREFUSED&#x27;,</span><br><span class="line">npm ERR!    syscall: &#x27;connect&#x27;,</span><br><span class="line">npm ERR!    address: &#x27;127.0.0.1&#x27;,</span><br><span class="line">npm ERR!    port: 12334,</span><br><span class="line">npm ERR!    type: &#x27;system&#x27;,</span><br><span class="line">npm ERR!    requiredBy: &#x27;.&#x27;</span><br><span class="line">npm ERR! &#125;</span><br><span class="line">npm ERR!</span><br><span class="line">npm ERR! If you are behind a proxy, please make sure that the</span><br><span class="line">npm ERR! &#x27;proxy&#x27; config is set properly.  See: &#x27;npm help config&#x27;</span><br><span class="line"></span><br><span class="line">npm ERR! A complete log of this run can be found in: C:\Users\ThinkPad\AppData\Local\npm-cache\_logs\2025-05-11T04_27_04_804Z-debug-0.log</span><br></pre></td></tr></table></figure>

<p>错误信息非常明确地指向了 <code>127.0.0.1:12334</code>，并且提到了 <code>registry.npmmirror.com</code> (淘宝 NPM 镜像)。这说明 npm 试图通过一个本地代理去访问镜像，但连接被拒绝了。我想起来之前确实调整过代理设置。</p>
<h3 id="解决方案：清除-npm-代理配置"><a href="#解决方案：清除-npm-代理配置" class="headerlink" title="解决方案：清除 npm 代理配置"></a>解决方案：清除 npm 代理配置</h3><p>根据AI助手的建议，我执行了以下步骤：</p>
<ol>
<li>查看当前的 npm 代理设置：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm config get proxy</span><br><span class="line">npm config get https-proxy</span><br></pre></td></tr></table></figure></li>
<li>如果返回了代理地址，则清除它们：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm config delete proxy</span><br><span class="line">npm config delete https-proxy</span><br></pre></td></tr></table></figure>
我还检查了系统环境变量 <code>HTTP_PROXY</code> 和 <code>HTTPS_PROXY</code>（在 Windows 中使用 <code>echo %HTTP_PROXY%</code> 和 <code>echo %HTTPS_PROXY%</code> 查看，或通过系统属性的环境变量设置界面修改），以及用户目录下的 <code>.npmrc</code> 文件 (<code>C:\Users\你的用户名\.npmrc</code>)，确保没有残留的代理配置。</li>
</ol>
<p>清除了这些配置后，<code>npm i hexo</code> 终于可以顺利执行了。第一个问题解决！</p>
<h2 id="问题二：hexo-g-d-失败-ERR-INVALID-URL"><a href="#问题二：hexo-g-d-失败-ERR-INVALID-URL" class="headerlink" title="问题二：hexo g -d 失败 - ERR_INVALID_URL"></a>问题二：<code>hexo g -d</code> 失败 - <code>ERR_INVALID_URL</code></h2><p>本以为可以顺利生成和部署了，没想到运行 <code>hexo g -d</code> (即 <code>hexo generate -d</code>) 时，又遇到了新的错误：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">PS E:\Geek\code\blog-source-main\blog-source-main&gt; hexo g -d</span><br><span class="line">INFO  Validating config</span><br><span class="line">INFO  index2 generators:</span><br><span class="line">INFO</span><br><span class="line">(node:20092) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.</span><br><span class="line">(Use `node --trace-deprecation ...` to show where the warning was created)</span><br><span class="line">INFO  ==================================</span><br><span class="line">  ███╗   ██╗███████╗██╗  ██╗████████╗</span><br><span class="line">  ████╗  ██║██╔════╝╚██╗██╔╝╚══██╔══╝</span><br><span class="line">  ██╔██╗ ██║█████╗    ╚███╔╝    ██║</span><br><span class="line">  ██║╚██╗██║██╔══╝    ██╔██╗    ██║</span><br><span class="line">  ██║ ╚████║███████╗██╔╝ ██╗    ██║</span><br><span class="line">  ╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝    ╚═╝</span><br><span class="line">========================================</span><br><span class="line">NexT version 8.12.2</span><br><span class="line">Documentation: [https://theme-next.js.org](https://theme-next.js.org)</span><br><span class="line">========================================</span><br><span class="line">INFO  Start processing</span><br><span class="line">FATAL Something&#x27;s wrong. Maybe you can find the solution here: [https://hexo.io/docs/troubleshooting.html](https://hexo.io/docs/troubleshooting.html)</span><br><span class="line">TypeError [ERR_INVALID_URL]: Invalid URL</span><br><span class="line">    at Url.parse (node:url:416:17)</span><br><span class="line">    at urlParse (node:url:141:13)</span><br><span class="line">    at E:\Geek\code\blog-source-main\blog-source-main\themes\next\scripts\filters\post.js:24:20</span><br><span class="line">    at [Symbol.replace] (&lt;anonymous&gt;)</span><br><span class="line">    at String.replace (&lt;anonymous&gt;)</span><br><span class="line">    # ... (省略部分堆栈信息) ...</span><br></pre></td></tr></table></figure>
<p>这次的错误是 <code>TypeError [ERR_INVALID_URL]: Invalid URL</code>，并且指向了我的 NexT 主题（版本 8.12.2）中的一个脚本 <code>themes\next\scripts\filters\post.js</code> 的第 24 行。</p>
<p>初步诊断是博客的全局配置 <code>_config.yml</code> 中的 <code>url</code> 字段，或者主题配置文件、文章内容中存在不合法的 URL。我检查了这些地方，特别是 <code>_config.yml</code> 中的 <code>url</code> 确保是完整的 <code>https://...</code> 格式，但问题依旧。</p>
<h3 id="深入排查：使用-console-log-大法"><a href="#深入排查：使用-console-log-大法" class="headerlink" title="深入排查：使用 console.log 大法"></a>深入排查：使用 <code>console.log</code> 大法</h3><p>为了定位 <code>post.js</code> 中到底是哪个 URL 出了问题，我们决定修改这个脚本，加入日志打印。我将当时的 <code>post.js</code> (位于 <code>themes/next/scripts/filters/post.js</code>) 内容提供给了AI助手，它帮我改造了脚本，加入了详细的 <code>console.log</code> 语句。以下是其中一个关键的调试版本（最终版，包含了非常详细的日志点）：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* global hexo */</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"></span><br><span class="line">hexo.<span class="property">extend</span>.<span class="property">filter</span>.<span class="title function_">register</span>(<span class="string">&#x27;after_post_render&#x27;</span>, <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// --- 日志打印开始 (第0处：确认filter执行) ---</span></span><br><span class="line">  <span class="comment">// 尝试获取文章标题或路径用于日志，data.source 是源 .md 文件路径, data.path 是输出的 HTML 路径</span></span><br><span class="line">  <span class="keyword">const</span> postIdentifier = data.<span class="property">source</span> || data.<span class="property">path</span> || (data.<span class="property">title</span> ? <span class="string">`文章标题: <span class="subst">$&#123;data.title&#125;</span>`</span> : <span class="string">&#x27;未知文章&#x27;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[DEBUG] post.js: Filter &#x27;after_post_render&#x27; 被调用，处理: <span class="subst">$&#123;postIdentifier&#125;</span>`</span>);</span><br><span class="line">  <span class="comment">// --- 日志打印结束 ---</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123; config &#125; = hexo; <span class="comment">// Hexo 主配置</span></span><br><span class="line">  <span class="keyword">const</span> theme = hexo.<span class="property">theme</span>.<span class="property">config</span>; <span class="comment">// NexT 主题配置</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// --- 日志打印开始 (检查主题配置的实际值) ---</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[DEBUG] post.js: 读取到的主题配置 - theme.exturl 的值: <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(theme.exturl)&#125;</span>`</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[DEBUG] post.js: 读取到的主题配置 - theme.lazyload 的值: <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(theme.lazyload)&#125;</span>`</span>);</span><br><span class="line">  <span class="comment">// --- 日志打印结束 ---</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!theme.<span class="property">exturl</span> &amp;&amp; !theme.<span class="property">lazyload</span>) &#123;</span><br><span class="line">    <span class="comment">// --- 日志打印开始 ---</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[DEBUG] post.js: 条件 (!theme.exturl &amp;&amp; !theme.lazyload) 为真，脚本提前返回。&#x27;</span>);</span><br><span class="line">    <span class="comment">// --- 日志打印结束 ---</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (theme.<span class="property">lazyload</span>) &#123;</span><br><span class="line">    <span class="comment">// --- 日志打印开始 ---</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[DEBUG] post.js: 检测到 theme.lazyload 为真，准备处理图片懒加载。&#x27;</span>);</span><br><span class="line">    <span class="comment">// --- 日志打印结束 ---</span></span><br><span class="line">    data.<span class="property">content</span> = data.<span class="property">content</span>.<span class="title function_">replace</span>(<span class="regexp">/(&lt;img[^&gt;]*) src=/img</span>, <span class="string">&#x27;$1 data-src=&#x27;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[DEBUG] post.js: 图片懒加载处理完成。&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (theme.<span class="property">exturl</span>) &#123;</span><br><span class="line">    <span class="comment">// --- 日志打印开始 ---</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[DEBUG] post.js: 检测到 theme.exturl 为真，进入外部链接处理模块。&#x27;</span>);</span><br><span class="line">    <span class="comment">// --- 日志打印结束 ---</span></span><br><span class="line">    <span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[DEBUG] post.js: (exturl) 正在处理文章: <span class="subst">$&#123;postIdentifier&#125;</span>`</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[DEBUG] post.js: (exturl) 准备解析 config.url (主配置)。值为:&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(config.<span class="property">url</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> siteHost;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      siteHost = url.<span class="title function_">parse</span>(config.<span class="property">url</span>).<span class="property">hostname</span> || config.<span class="property">url</span>;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[DEBUG] post.js: (exturl) 成功解析 config.url。得到的 siteHost:&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(siteHost));</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;[DEBUG] post.js: (exturl) 解析 config.url (主配置) 时发生致命错误! config.url 的值是:&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(config.<span class="property">url</span>));</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;[DEBUG] post.js: (exturl) 错误详情:&#x27;</span>, e);</span><br><span class="line">      <span class="keyword">throw</span> e; <span class="comment">// 重新抛出错误，让 Hexo 停止</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    data.<span class="property">content</span> = data.<span class="property">content</span>.<span class="title function_">replace</span>(<span class="regexp">/&lt;a[^&gt;]* href=&quot;([^&quot;]+)&quot;[^&gt;]*&gt;([^&lt;]+)&lt;\/a&gt;/img</span>, <span class="function">(<span class="params">match, href, html</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!href) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[DEBUG] post.js: (exturl) 在文章 &quot;<span class="subst">$&#123;postIdentifier&#125;</span>&quot; 中发现一个空的 href 属性，跳过处理。原始匹配 (前100字符):`</span>, match.<span class="title function_">substring</span>(<span class="number">0</span>, <span class="number">100</span>) + <span class="string">&#x27;...&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> match;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[DEBUG] post.js: (exturl) 在文章 &quot;<span class="subst">$&#123;postIdentifier&#125;</span>&quot; 中，准备解析链接的 href。值为:`</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(href));</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> link;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        link = url.<span class="title function_">parse</span>(href);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`[DEBUG] post.js: (exturl) 在文章 &quot;<span class="subst">$&#123;postIdentifier&#125;</span>&quot; 中，解析 href 时发生致命错误! href 的值是:`</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(href));</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;[DEBUG] post.js: (exturl) 错误详情:&#x27;</span>, e);</span><br><span class="line">        <span class="keyword">throw</span> e; <span class="comment">// 重新抛出错误</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (!link.<span class="property">protocol</span> || link.<span class="property">hostname</span> === siteHost) &#123;</span><br><span class="line">        <span class="keyword">return</span> match;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="string">`&lt;span class=&quot;exturl&quot; data-url=&quot;<span class="subst">$&#123;Buffer.<span class="keyword">from</span>(href).toString(<span class="string">&#x27;base64&#x27;</span>)&#125;</span>&quot;&gt;<span class="subst">$&#123;html&#125;</span>&lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/span&gt;`</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// --- 日志打印开始 ---</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[DEBUG] post.js: (exturl) 外部链接处理模块执行完毕。&#x27;</span>);</span><br><span class="line">    <span class="comment">// --- 日志打印结束 ---</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// --- 日志打印开始 ---</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[DEBUG] post.js: 条件 (theme.exturl) 为假，跳过外部链接处理模块。&#x27;</span>);</span><br><span class="line">    <span class="comment">// --- 日志打印结束 ---</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[DEBUG] post.js: Filter &#x27;after_post_render&#x27; 执行完毕，针对: <span class="subst">$&#123;postIdentifier&#125;</span>`</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br></pre></td></tr></table></figure>

<p>（注：实际调试中，我经历了日志未显示、发现 Hexo 加载了 <code>post - 副本.js</code> 文件名问题并修正、再到最终版详细日志的采用的过程。上面的代码是最终帮助定位问题的版本。）</p>
<h3 id="转机：GitHub-Codespaces-的纯净环境"><a href="#转机：GitHub-Codespaces-的纯净环境" class="headerlink" title="转机：GitHub Codespaces 的纯净环境"></a>转机：GitHub Codespaces 的纯净环境</h3><p>在我本地反复尝试，甚至回档了之前在 GitHub 上能正常运行的备份，都无法解决问题，也无法让日志在本地正确输出时，我几乎要放弃了。AI助手建议我尝试在 GitHub Codespaces 这样的纯净环境中运行。我抱着试一试的心态，在 Codespaces 里打开了我的“老备份”项目，清除了 <code>node_modules</code> 和 <code>package-lock.json</code>，重新 <code>npm install</code>，并将上面带有最详细日志的 <code>post.js</code> 文件放到了正确的位置 (<code>themes/next/scripts/filters/post.js</code>)，同时确认了主题配置文件 <code>themes/next/_config.yml</code> 中的 <code>exturl</code> 设置为 <code>true</code>。然后运行 <code>hexo clean &amp;&amp; hexo g</code>。</p>
<p>奇迹发生了！这次，控制台终于打印出了我们期待已久的 <code>[DEBUG]</code> 日志！</p>
<h3 id="定位问题URL"><a href="#定位问题URL" class="headerlink" title="定位问题URL"></a>定位问题URL</h3><p>大量的日志输出（部分示例如下，实际日志非常长，遍历了所有文章），最终将问题指向了特定的文章和其中的链接：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">INFO  Start processing</span><br><span class="line">[DEBUG] post.js: Filter &#x27;after_post_render&#x27; 被调用，处理: _posts/2022流水账.md</span><br><span class="line">[DEBUG] post.js: 读取到的主题配置 - theme.exturl 的值: true</span><br><span class="line">[DEBUG] post.js: 读取到的主题配置 - theme.lazyload 的值: true</span><br><span class="line">[DEBUG] post.js: 检测到 theme.lazyload 为真，准备处理图片懒加载。</span><br><span class="line">[DEBUG] post.js: 图片懒加载处理完成。</span><br><span class="line">[DEBUG] post.js: 检测到 theme.exturl 为真，进入外部链接处理模块。</span><br><span class="line">[DEBUG] post.js: (exturl) 正在处理文章: _posts/2022流水账.md</span><br><span class="line">[DEBUG] post.js: (exturl) 准备解析 config.url (主配置)。值为: &quot;[https://blog.nbplus.eu.org](https://blog.nbplus.eu.org)&quot;</span><br><span class="line">[DEBUG] post.js: (exturl) 成功解析 config.url。得到的 siteHost: &quot;blog.nbplus.eu.org&quot;</span><br><span class="line">[DEBUG] post.js: (exturl) 外部链接处理模块执行完毕。</span><br><span class="line">[DEBUG] post.js: Filter &#x27;after_post_render&#x27; 执行完毕，针对: _posts/2022流水账.md</span><br><span class="line"># ... 大量其他文章的正常处理日志 ...</span><br><span class="line">[DEBUG] post.js: Filter &#x27;after_post_render&#x27; 被调用，处理: _posts/vercel的DNS服务器疑似出现故障.md</span><br><span class="line"># ... (相关日志) ...</span><br><span class="line">[DEBUG] post.js: (exturl) 在文章 &quot;_posts/vercel的DNS服务器疑似出现故障.md&quot; 中，准备解析链接的 href。值为: &quot;[http://www.hehysh.eu.org](http://www.hehysh.eu.org)………&quot;</span><br><span class="line">[DEBUG] post.js: (exturl) 在文章 &quot;_posts/vercel的DNS服务器疑似出现故障.md&quot; 中，解析 href 时发生致命错误! href 的值是: &quot;[http://www.hehysh.eu.org](http://www.hehysh.eu.org)………&quot;</span><br><span class="line">[DEBUG] post.js: (exturl) 错误详情: TypeError [ERR_INVALID_URL]: Invalid URL</span><br><span class="line">    # ... (错误堆栈) ...</span><br><span class="line">  code: &#x27;ERR_INVALID_URL&#x27;,</span><br><span class="line">  input: &#x27;[http://www.hehysh.eu.org](http://www.hehysh.eu.org)………&#x27;</span><br><span class="line">&#125;</span><br><span class="line"># ... 可能还有其他文章的处理，直到遇到下一个致命错误或 Hexo 决定停止 ...</span><br><span class="line">[DEBUG] post.js: Filter &#x27;after_post_render&#x27; 被调用，处理: _posts/添加开往-友链接力在你的博客.md</span><br><span class="line"># ... (相关日志) ...</span><br><span class="line">[DEBUG] post.js: (exturl) 在文章 &quot;_posts/添加开往-友链接力在你的博客.md&quot; 中，准备解析链接的 href。值为: &quot;[https://travellings.link](https://travellings.link)），加入您的顶栏导航或侧栏导航中，便于访客看到并点击：&quot;</span><br><span class="line">[DEBUG] post.js: (exturl) 在文章 &quot;_posts/添加开往-友链接力在你的博客.md&quot; 中，解析 href 时发生致命错误! href 的值是: &quot;[https://travellings.link](https://travellings.link)），加入您的顶栏导航或侧栏导航中，便于访客看到并点击：&quot;</span><br><span class="line">[DEBUG] post.js: (exturl) 错误详情: TypeError [ERR_INVALID_URL]: Invalid URL</span><br><span class="line">    # ... (错误堆栈) ...</span><br><span class="line">  code: &#x27;ERR_INVALID_URL&#x27;,</span><br><span class="line">  input: &#x27;[https://travellings.link](https://travellings.link)），加入您的顶栏导航或侧栏导航中，便于访客看到并点击：&#x27;</span><br><span class="line">&#125;</span><br><span class="line"># ... 以及最终的 FATAL ERROR ...</span><br><span class="line">FATAL Something&#x27;s wrong. Maybe you can find the solution here: [https://hexo.io/docs/troubleshooting.html](https://hexo.io/docs/troubleshooting.html)</span><br><span class="line">TypeError [ERR_INVALID_URL]: Invalid URL</span><br><span class="line">    # ... (错误堆栈，指向 post.js 中 url.parse(href) 的地方) ...</span><br></pre></td></tr></table></figure>
<p>从这些日志中，我们明确找到了两个（或更多）有问题的链接：</p>
<ol>
<li>在 <code>_posts/vercel的DNS服务器疑似出现故障.md</code> 中，链接 <code>http://www.hehysh.eu.org………</code> 末尾的多个点是无效的。</li>
<li>在 <code>_posts/添加开往-友链接力在你的博客.md</code> 中，链接 <code>https://travellings.link），加入您的顶栏导航或侧栏导航中，便于访客看到并点击：</code> 在有效域名后包含了中文括号和文字，这也是无效的。</li>
<li>（在完整的日志分析中还发现一个 <code>_posts/next主题使用Gemini进行ai文章总结.md</code> 中的链接也包含了未编码的中文和特殊字符，同样可疑）。</li>
</ol>
<h3 id="解决方案：修正文章中的无效链接"><a href="#解决方案：修正文章中的无效链接" class="headerlink" title="解决方案：修正文章中的无效链接"></a>解决方案：修正文章中的无效链接</h3><p>我立刻打开这些 Markdown 文件 (<code>source/_posts/</code>目录下对应的文件)，找到了这些错误的链接并进行了修正：</p>
<ul>
<li>对于 <code>http://www.hehysh.eu.org………</code>，我将其修正为预期的正确地址（例如 <code>http://www.hehysh.eu.org/</code>）。</li>
<li>对于 <code>https://travellings.link），...</code>，我将 <code>href</code> 的值修正为 <code>https://travellings.link</code>，并将多余的描述文字放到了 Markdown 链接的显示文本部分或链接之外。例如，将 <code>[文本](URL和多余文字)</code> 修改为 <code>[文本](URL) 多余文字</code>。</li>
</ul>
<p>修正这些链接后，再次运行 <code>hexo clean &amp;&amp; hexo g</code>。<br><strong>成功了！</strong> <code>hexo generate</code> 命令终于顺利完成，没有再报 <code>ERR_INVALID_URL</code> 错误！</p>
<h3 id="问题三：hexo-d-部署失败-Git-Submodule-问题"><a href="#问题三：hexo-d-部署失败-Git-Submodule-问题" class="headerlink" title="问题三：hexo d 部署失败 - Git Submodule 问题"></a>问题三：<code>hexo d</code> 部署失败 - Git Submodule 问题</h3><p>正当我以为大功告成，准备部署 <code>hexo d</code> 时，新的拦路虎又出现了：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fatal: in unpopulated submodule &#x27;.deploy_git&#x27;</span><br><span class="line">FATAL Something&#x27;s wrong. Maybe you can find the solution here: [https://hexo.io/docs/troubleshooting.html](https://hexo.io/docs/troubleshooting.html)</span><br><span class="line">Error: Spawn failed</span><br><span class="line">    at ChildProcess.&lt;anonymous&gt; (/workspaces/blog-source/node_modules/hexo-util/lib/spawn.js:51:21)</span><br><span class="line">    at ChildProcess.emit (node:events:524:28)</span><br><span class="line">    at ChildProcess._handle.onexit (node:internal/child_process:293:12)</span><br></pre></td></tr></table></figure>
<p>这个错误 <code>fatal: in unpopulated submodule &#39;.deploy_git&#39;</code> 表明 <code>.deploy_git</code> 目录被视作一个未初始化的 Git 子模块。</p>
<p>我尝试了 <code>git submodule init</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@hehysh ➜ /workspaces/blog-source (main) $ git submodule init</span><br><span class="line">fatal: No url found <span class="keyword">for</span> submodule path <span class="string">&#x27;.deploy_git&#x27;</span> <span class="keyword">in</span> .gitmodules</span><br></pre></td></tr></table></figure>
<p>结果又报了 <code>No url found for submodule path &#39;.deploy_git&#39; in .gitmodules</code> 的错误，说明 <code>.gitmodules</code> 文件中没有这个子模块的 URL 配置。</p>
<p>AI助手解释说，Hexo 的 <code>hexo-deployer-git</code> 插件通常是将 <code>.deploy_git</code> 作为一个独立的 Git 仓库（克隆自你的部署目标仓库）来管理的，而不是作为博客源码仓库的一个子模块。我遇到的情况很可能是 <code>.deploy_git</code> 被错误地添加为了主项目的子模块引用。</p>
<h3 id="解决方案：移除错误的子模块引用并让-Hexo重新管理部署目录"><a href="#解决方案：移除错误的子模块引用并让-Hexo重新管理部署目录" class="headerlink" title="解决方案：移除错误的子模块引用并让 Hexo重新管理部署目录"></a>解决方案：移除错误的子模块引用并让 Hexo重新管理部署目录</h3><p>我按照指示执行了以下步骤：</p>
<ol>
<li><p>从主项目的 Git 索引中移除 <code>.deploy_git</code> 的子模块引用（在项目根目录 <code>/workspaces/blog-source</code> 执行）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">rm</span> --cached .deploy_git</span><br></pre></td></tr></table></figure>
<p>或者更彻底地：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git submodule deinit -f .deploy_git <span class="comment"># 强制反初始化</span></span><br><span class="line">git <span class="built_in">rm</span> -f .deploy_git               <span class="comment"># 从工作区和索引中移除</span></span><br><span class="line"><span class="built_in">rm</span> -rf .git/modules/.deploy_git     <span class="comment"># 删除子模块的 .git 目录数据（如果存在）</span></span><br></pre></td></tr></table></figure>
<p>然后，如果存在 <code>.gitmodules</code> 文件并且里面有 <code>.deploy_git</code> 的内容，也需要手动删除那部分。</p>
</li>
<li><p>将 <code>.deploy_git/</code> 添加到主项目的 <code>.gitignore</code> 文件中，以防止将来被错误跟踪。<br><code>.gitignore</code> 文件内容示例：</p>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">node_modules<span class="symbol">/</span></span><br><span class="line">public<span class="symbol">/</span></span><br><span class="line">.deploy_git<span class="symbol">/</span></span><br><span class="line">db.json</span><br><span class="line"><span class="comment"># 其他需要忽略的文件或文件夹</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>提交这些更改到你的主博客仓库：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add .gitignore .gitmodules  <span class="comment"># .gitmodules 可能已被删除或修改</span></span><br><span class="line">git commit -m <span class="string">&quot;Remove stale .deploy_git submodule reference and update .gitignore&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>彻底删除本地的 <code>.deploy_git</code> 目录（如果还存在的话）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf .deploy_git</span><br></pre></td></tr></table></figure>
</li>
<li><p>确保 <code>_config.yml</code> 中的部署配置正确：<br>检查主 <code>_config.yml</code> 文件中的 <code>deploy</code> 部分，例如：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">git@github.com:YOUR_USERNAME/YOUR_GITHUB_PAGES_REPO.git</span> <span class="comment"># 替换成你的仓库地址</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span> <span class="comment"># 或者 gh-pages</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>重新部署：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo deploy -g <span class="comment"># -g 参数会先执行 generate</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p>这一次，部署过程非常顺利！所有的文件都成功推送到了我的 GitHub Pages 仓库。</p>
<h2 id="总结与感悟"><a href="#总结与感悟" class="headerlink" title="总结与感悟"></a>总结与感悟</h2><p>这次漫长的排错过程，让我深刻体会到了以下几点：</p>
<ol>
<li><strong>环境的重要性：</strong> 本地环境的复杂性（代理、缓存、文件占用、Node版本）确实可能导致很多难以预料的问题。适时切换到纯净环境（如 Codespaces）进行测试，可以帮助快速排除环境因素。</li>
<li><strong>日志是王道：</strong> <code>console.log</code> 虽然简单，但在定位 JavaScript 相关问题时非常有效。关键在于把日志加到正确的位置，并仔细分析输出。</li>
<li><strong>理解工具原理：</strong> 对 Hexo 的工作流程、插件（如 <code>hexo-deployer-git</code>）的运作方式以及相关技术（如 Git 子模块）有基本了解，能帮助更快地诊断问题。</li>
<li><strong>备份和版本控制：</strong> 幸好我有之前的备份，虽然它在新环境下也出了问题，但至少提供了一个相对稳定的基线。Git 的版本控制也让我在尝试各种修改时有恃无恐。</li>
<li><strong>善用AI和社区：</strong> 在遇到难题时，向AI助手提问，或者搜索社区的解决方案，往往能获得意想不到的帮助和启发。</li>
<li><strong>耐心和细致：</strong> 排查问题就像侦探破案，需要一步步缩小范围，不放过任何细节。尤其是在错误信息不直观时，更要保持耐心。</li>
<li><strong>不要忘记清理：</strong> 调试完成后，记得移除或注释掉添加的调试代码，保持项目整洁。</li>
</ol>
<p>希望我这次的踩坑经历能为同样使用 Hexo 的朋友们提供一些帮助。如果你也遇到了类似的问题，不妨试试本文中提到的一些排查思路和方法。祝大家的博客都能顺利运行！</p>
<h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><blockquote>
<p>也是由ai写的。</p>
</blockquote>
<p>好的，这是针对“问题二：<code>hexo g -d</code> 失败 - <code>ERR_INVALID_URL</code>”的简洁明了的解决方案，采用 Markdown 格式并包含相关代码示例：</p>
<h2 id="问题二：hexo-g-d-失败-ERR-INVALID-URL-的解决方案"><a href="#问题二：hexo-g-d-失败-ERR-INVALID-URL-的解决方案" class="headerlink" title="问题二：hexo g -d 失败 - ERR_INVALID_URL 的解决方案"></a>问题二：<code>hexo g -d</code> 失败 - <code>ERR_INVALID_URL</code> 的解决方案</h2><p><strong>背景：</strong><br>在执行 <code>hexo g -d</code> (或 <code>hexo generate</code>) 命令时，控制台报错 <code>TypeError [ERR_INVALID_URL]: Invalid URL</code>，错误堆栈指向了主题文件 <code>themes/next/scripts/filters/post.js</code>（具体行号可能因主题版本和代码略有差异）。尽管已初步检查 Hexo 的主配置文件 (<code>_config.yml</code>) 和 NexT 主题的配置文件 (<code>themes/next/_config.yml</code>) 中的 <code>url</code> 等相关设置，确保其格式正确（例如，<code>url</code> 字段为完整的 <code>https://yourdomain.com</code>），但问题依旧未能解决。</p>
<p><strong>核心排查与解决步骤：</strong></p>
<ol>
<li><p><strong>利用纯净环境与详细日志定位问题源头：</strong></p>
<ul>
<li><strong>切换至纯净环境</strong>：为了排除本地复杂环境的干扰，将项目迁移至如 GitHub Codespaces 这样的纯净环境中进行测试。在此环境中，需要重新 <code>npm install</code> 依赖。</li>
<li><strong>修改 <code>themes/next/scripts/filters/post.js</code> 文件</strong>：在该脚本中，关键的 URL 解析通常发生在处理外部链接（<code>exturl</code> 功能）时，涉及到对 <code>config.url</code>（博客全局URL）和文章内容中每个链接的 <code>href</code> 属性的解析。在这些 <code>url.parse()</code> 调用前后添加 <code>console.log</code> 语句，以便打印出正被处理的 URL 值。<ul>
<li><em>添加日志的核心思路（仅为示例，具体代码参照实际调试时使用的版本）：</em>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在 post.js 文件中找到类似处理外部链接的逻辑块</span></span><br><span class="line"><span class="keyword">if</span> (theme.<span class="property">exturl</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>); <span class="comment">// Node.js &#x27;url&#x27; 模块</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 日志点1: 检查 config.url</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[DEBUG] post.js: (exturl) 准备解析 config.url (主配置)。值为:&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(config.<span class="property">url</span>));</span><br><span class="line">  <span class="keyword">let</span> siteHost;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    siteHost = url.<span class="title function_">parse</span>(config.<span class="property">url</span>).<span class="property">hostname</span> || config.<span class="property">url</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[DEBUG] post.js: (exturl) 成功解析 config.url。得到的 siteHost:&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(siteHost));</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;[DEBUG] post.js: (exturl) 解析 config.url (主配置) 时发生致命错误!&#x27;</span>, e);</span><br><span class="line">    <span class="keyword">throw</span> e; </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  data.<span class="property">content</span> = data.<span class="property">content</span>.<span class="title function_">replace</span>(<span class="regexp">/&lt;a[^&gt;]* href=&quot;([^&quot;]+)&quot;[^&gt;]*&gt;([^&lt;]+)&lt;\/a&gt;/img</span>, <span class="function">(<span class="params">match, href, html</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!href) &#123;</span><br><span class="line">      <span class="comment">// console.log(&#x27;[DEBUG] post.js: (exturl) 空 href，跳过&#x27;); // 可选日志</span></span><br><span class="line">      <span class="keyword">return</span> match;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 日志点2: 检查文章中的 href</span></span><br><span class="line">    <span class="comment">// 最好同时打印出当前处理的文章名，如 data.source</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`[DEBUG] post.js: (exturl) 在文章 &quot;<span class="subst">$&#123;data.source&#125;</span>&quot; 中，准备解析链接的 href。值为:`</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(href));</span><br><span class="line">    <span class="keyword">let</span> link;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      link = url.<span class="title function_">parse</span>(href); </span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="comment">// 日志点3: 捕获解析 href 时的错误</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`[DEBUG] post.js: (exturl) 在文章 &quot;<span class="subst">$&#123;data.source&#125;</span>&quot; 中，解析 href 时发生致命错误! href 的值是:`</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(href));</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;[DEBUG] post.js: (exturl) 错误详情:&#x27;</span>, e);</span><br><span class="line">      <span class="keyword">throw</span> e; <span class="comment">// 重新抛出错误以便看到 Hexo 的原始中断</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ...后续判断是否为外部链接并处理的逻辑...</span></span><br><span class="line">    <span class="keyword">if</span> (!link.<span class="property">protocol</span> || link.<span class="property">hostname</span> === siteHost) &#123;</span><br><span class="line">      <span class="keyword">return</span> match;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`&lt;span class=&quot;exturl&quot; data-url=&quot;<span class="subst">$&#123;Buffer.<span class="keyword">from</span>(href).toString(<span class="string">&#x27;base64&#x27;</span>)&#125;</span>&quot;&gt;<span class="subst">$&#123;html&#125;</span>&lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/span&gt;`</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>分析日志，找出问题URL及所在文章：</strong></p>
<ul>
<li>执行 <code>hexo clean &amp;&amp; hexo g</code> 命令。</li>
<li>仔细查看控制台输出的 <code>[DEBUG] post.js:</code> 开头的日志行。当 <code>ERR_INVALID_URL</code> 错误发生时，它之前的日志会显示导致问题的文章名和具体的 <code>href</code> 值。</li>
<li><em>根据实际排查时得到的日志，发现的错误示例如下：</em><ul>
<li><strong>错误日志片段 1 (文章 <code>_posts/vercel的DNS服务器疑似出现故障.md</code>)：</strong>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[DEBUG] post.js: (exturl) 在文章 &quot;_posts/vercel的DNS服务器疑似出现故障.md&quot; 中，准备解析链接的 href。值为: &quot;http://www.hehysh.eu.org………&quot;</span><br><span class="line">[DEBUG] post.js: (exturl) 在文章 &quot;_posts/vercel的DNS服务器疑似出现故障.md&quot; 中，解析 href 时发生致命错误! href 的值是: &quot;http://www.hehysh.eu.org………&quot;</span><br><span class="line">[DEBUG] post.js: (exturl) 错误详情: TypeError [ERR_INVALID_URL]: Invalid URL</span><br><span class="line">input: &#x27;http://www.hehysh.eu.org………&#x27; </span><br></pre></td></tr></table></figure></li>
<li><strong>错误日志片段 2 (文章 <code>_posts/添加开往-友链接力在你的博客.md</code>)：</strong>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[DEBUG] post.js: (exturl) 在文章 &quot;_posts/添加开往-友链接力在你的博客.md&quot; 中，准备解析链接的 href。值为: &quot;https://travellings.link），加入您的顶栏导航或侧栏导航中，便于访客看到并点击：&quot;</span><br><span class="line">[DEBUG] post.js: (exturl) 在文章 &quot;_posts/添加开往-友链接力在你的博客.md&quot; 中，解析 href 时发生致命错误! href 的值是: &quot;https://travellings.link），加入您的顶栏导航或侧栏导航中，便于访客看到并点击：&quot;</span><br><span class="line">[DEBUG] post.js: (exturl) 错误详情: TypeError [ERR_INVALID_URL]: Invalid URL</span><br><span class="line">input: &#x27;https://travellings.link），加入您的顶栏导航或侧栏导航中，便于访客看到并点击：&#x27;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>修正源 Markdown 文件中的无效URL：</strong></p>
<ul>
<li>根据日志定位到的 <code>.md</code> 文章文件和具体的 <code>href</code> 值，在文本编辑器中打开这些文章。</li>
<li><strong>具体修正方法：</strong><ul>
<li>对于 <code>&quot;http://www.hehysh.eu.org………&quot;</code>：问题在于 URL 末尾的多个连续点 <code>………</code>。应将其修改为正确的 URL，例如 <code>http://www.hehysh.eu.org/</code>，或删除这些多余的点。</li>
<li>对于 <code>&quot;https://travellings.link），加入您的顶栏导航或侧栏导航中，便于访客看到并点击：&quot;</code>：问题在于有效的 URL <code>https://travellings.link</code> 之后，错误地包含了中文括号 <code>）</code> 和其他描述性文字。应确保 <code>href</code> 属性的值<strong>仅为</strong> <code>https://travellings.link</code>。<ul>
<li>例如，如果 Markdown 源码中错误地写成了：  <figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">链接显示文本</span>](<span class="link">https://travellings.link），加入您的顶栏导航或侧栏导航中，便于访客看到并点击：</span>)</span><br></pre></td></tr></table></figure></li>
<li>应修正为，将描述文字移出 <code>href</code> 部分：  <figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">链接显示文本</span>](<span class="link">https://travellings.link</span>)），加入您的顶栏导航或侧栏导航中，便于访客看到并点击：</span><br></pre></td></tr></table></figure>
  或者，根据原意调整链接文本和周围句子，确保 <code>()</code> 内只有纯粹的 URL。</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>迭代修正与验证：</strong></p>
<ul>
<li>每修正一处或几处发现的无效链接后，保存文件。</li>
<li>再次运行 <code>hexo clean &amp;&amp; hexo g</code>。</li>
<li>如果错误依旧，重复步骤2和3，根据新的日志提示找出并修正下一个问题链接。这个过程可能需要重复几次，直到所有文章中的无效链接都被修正。</li>
</ul>
</li>
<li><p><strong>清理调试代码：</strong></p>
<ul>
<li>当 <code>hexo g</code> 命令能够成功完成，不再出现 <code>ERR_INVALID_URL</code> 错误后，务必将之前在 <code>themes/next/scripts/filters/post.js</code> 中添加的所有 <code>console.log</code> 调试语句移除或注释掉，以恢复脚本的原始状态并避免不必要的控制台输出。</li>
</ul>
</li>
</ol>
<p><strong>最终结果：</strong><br>通过上述系统性的日志分析和内容修正，所有导致 <code>url.parse()</code> 失败的无效链接均被找出并更正。随后，<code>hexo g</code> 命令成功执行，<code>ERR_INVALID_URL</code> 问题得到彻底解决。</p>
<h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>现在又是本人在写了。没想到ai已经发展到如此地步，这次成功解决问题也是多亏了Gemini。另外谷歌的Gemini最近有bug，只要到<span class="exturl" data-url="aHR0cHM6Ly9nZW1pbmkuZ29vZ2xlL3N0dWRlbnRz">https://gemini.google/students<i class="fa fa-external-link-alt"></i></span> 这个链接点击领取offer就可以不用验证edu邮箱和信用卡获得免费的google advance，不过只到今年8月30日，之后就要验证了</p>

    </div>

    
    
    

    <footer class="post-footer"><div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">---------文章结束啦~有什么想评论的吗？---------</div>
    
</div>

<!--
<br><a target="_blank" rel="noopener" href="https://notbyai.fyi"><img src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIMAAAAqCAYAAACQjuhAAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAf/SURBVHgB7ZzrURtJFIVbW/vfOAIgAtsRABEYRwBEAERgHAEiAiAC4whsIgBHAI4AMtD2N6ujOlz3SDMjsV5Jc6puwcz0u++7GwYppVHqsWp4znQ/pttMN00qDTKNMlKP1cHz83O6v7+v6Nu3b+nHjx+P+fVVputMj9PqjnqsNh4eHkaHh4dI/EOmwzpG6DXDGuHx8THt7e3xc5gfT+P3v1KPtcHW1la6u7tL+/v7J/nxMn7vmWHNsLGxkb5+/ZoODg4O8+O5f+vNxJoCJ/PDhw+YDMwFZmN5mIHBQ0J2iNLV1dXkGY6HIlCN2MoSdnd38bTTly9fJm1kZyu9ffu2+v34+Djd3Nyknz9/pjpsbm5WY1lGEG1khmBRtzM9L42ZYODX19cT+vXr14tnNm2etrPanIRjOzs7EwYiNNMzG8/vTvS9rHj//j2MjAThQyyPz4AUM3htEs9AGqNOOmEa1yjC0dFR9e3s7Kx6RkN8/PhxUhbmAGw4fdEvjOEMiNbh+zLj8+fP/DjOtLFQM8GCsmBIqat1NhFigbWJXYBZQGXTlsAmQZeXl8XxfPr0KQ2Hw8nmOqKZ8DbB+fn5xPQQksU+6kzTsoG55XXY+zstACwoklZnm6V+2UykCWksbU4T0IdvQEnqBaSXDaXf2B/10Aynp6cTdc/YMAV8o7z6Yez060xDGWeWZUYONdnD/bmZgcVE8gALg7p+9+5dJb08s2hSsWgMfqcMC8xitgVtsmHCmzdvigzhGoONhmHdtMC8ADXJWNQuDIH24af3SXzuG4/GWQVGAGNTtzOXmSA0YSEBnjcSP22BJF2KAmAYFrkJqANDqZ7AxrLRcPfY/lVgs5kkjEe/bN73799fjA/mgJEvLi4mDAFRnj5gVtopMRvlNQ7aXWYwvxxBVZMcdcHJyQkcNMqLN8rS16ZqVZ561KedJnh6ehplxqly7HmTqnw7z3lDR5lRqmeVo83MGL/1maV9Ug5kZnlRh/byxlZ9eLnSWOh3lZDGp9ejtmBhx5VbM0KpDTZgFtgsKJZl02iLDQRilhIoyyaymVkjjLI2qRhAP70c7yhXqg/lLN5oldCZGZAw6mkDukLahfZ6/Fl0YgYkU+YhqlK+IaUuZQLvIZc2fpe5aKIderweOjHD+Fy8qBX0LTuSdZ39xkDSDk19hx6vA/agdQZS0QPZukWAMBR0SSdTB2+faAAQcfhzEzAfohFIc4sgulAZp7ryREx8V+KNpA7UNWXOfKhPRKQ7Ca+VBm/NQVDJFOBUoRVKKp/3UHTKaCeNzU5b0B515dlLM7Xx9GWmpo1B/UQq9YPmS+Zc+zNRTxdoXvhWPpaSBu4K2uucdCrlE4j1oRI8B1BqZ1omUbi9vZ2cJYBpGU+kx/vgDD+CvIX3q5zFPClzl9i27cS0uCANpLHqJJb3aA1yPItCKw6SJNVphlmIWkOaock4PBxNBQmVBEWqi1YIH2PZku+CdDPunGR6IfWlNVCkpX79mbXTOxEhrlAa+yxaVCSWumgGpX/jgRFcjdSS8YsHUpTHXiot7GcFnA8Ab6sOlHHNINsdgeT4KWZJi2lMahdJ4x1ji2ly2oNi9tJT1gApdW0VNVe8k6F3EfEAzOvFPuPzPGjNDDoF1B0AYTROabOYSjdroL4oTDL7DZNn35BZ0Omno44Z6sxS7BforIRxdzUVzFFnNN4/7XF+o37ikXdp3vGUVY4xIH2vq/CMcdHnI63UiecZShk6VLU7ZclUJClir0P5NnkGyruKVd2SmahTxQJ1koW7boLqwtxYx4GJlEmI2czU0IFMZvaYiyj7BC/6dYdyUUjzZiCn5QaU54fq8vxtJ+ULm1r4DNHr9nbwA4AnwEqMDqYxg9qA8fgmkvBA8VtsI9X4BaTXk/kqGue8GeBC3+2ZwSfYNVyink+wCVhsMZgOlErMwAZ7ubjodVrAN7ukqWYxA/C1mUVRCKJm8LGIAdyJnXaY1ha0R9LpuUlY58BW5UWsfudn2wQI5VWfsKjphVLGqSNmHNi6pA+Q01dysHy8ut8IuZ/wX99tjJd9460qzUNzpswinUfhrhQiNYFz6axjX6Cj4hRUdFNsbm4WJUzSXWcmkkl6nalJBR8nmoommiFqL3wJH6d/83X3EFtj9WdfN/W/aM0AMwxLDlZT+CBZQDaEBWByunOAWqacO5Y4RW2hvEB0ULV4TZiBuTZhhlQwgU2YIaKpA+nmhXlGc+DrLOZnHRaVhRQz7M57UUMXR5osMOW6nlCKwTwKcbvrPkR01CTlvshENzpNFTlDaV2oq7sMzlwlJzOiKTN4mtl9GuYXtQJjnCeNX4KYgUD1aREqR06dL7iybqWLKV2A1nGv38c962zCVXFdBMMGR1PR5Gyiqfmp00ASJl2+gSFgVl/LKFTT5toWYgZwtsgw5bXgqpSNir7OLGZwCZs2X9cAmJXXZgb60ObGyConn6r3MAXzjczR9aZZBG0NxsyAdnjInW00yQT+SZCNw9PH247etI6OORZXNtDBN/8jnDpv3MspDV2KXHivgzlPb7eFMolkGUmF+7hol7kQfem2udLeuvC7CAwGgzSw55M8iPN4JbzHegBm8Mstw8xtF8qj91g/DArvrrLqO0AN9xpifRDNhGOYTcYxfxzyGlmuHv8/RDPhOMkm42h7e/tx2t9Q9lgtDGZ830r//newg+zxbuE5+99R9lgdTDMTJRBD7WbiOjPxZ88NK4Z/AB88ZArsyuJXAAAAAElFTkSuQmCC></a><br>
-->
          <div class="followme">
  <span>欢迎关注我的其它发布渠道</span>

  <div class="social-list">

      <div class="social-item">
        <a target="_blank" class="social-link" href="https://t.me/QingQue_blog_bot">
          <span class="icon">
            <i class="fab fa-telegram"></i>
          </span>

          <span class="label">晴雀堂Telegram机器人</span>
        </a>
      </div>

      <div class="social-item">
        <a target="_blank" class="social-link" href="/atom.xml">
          <span class="icon">
            <i class="fa fa-rss"></i>
          </span>

          <span class="label">RSS</span>
        </a>
      </div>
  </div>
</div>


        
          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/posts/18424.html" rel="prev" title="switch大气层虚拟系统急救指南">
                  <i class="fa fa-chevron-left"></i> switch大气层虚拟系统急救指南
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/posts/60168.html" rel="next" title="博客小修">
                  博客小修 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments" id="waline"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2022 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">晴雀</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">154k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">2:20</span>
  </span>
</div><!--
<div id="ft">
  <div class="ft-item-1">
    <div class="t-top">
      <div class="t-t-l">
        <p class="ft-t t-l-t">说点什么</p>
        <div class="bg-ad">
          <div>里的内容随你写，但是不要过长影响整体美观度，具体可根据实现效果修改）随便说点什么说点什么、随便说点什么说点什么随便说点什么说点什么随便说点什么说点什么随便说点什么说。</div>
          <div class="btn-xz-box"><a class="btn-xz" href="https://blog.nbplus.eu.org/">点击跳转到哪儿</a></div>
        </div>
      </div>
      <div class="t-t-r">
        <p class="ft-t t-l-t">导航</p>
        <ul class="ft-links">
          <li><a href="https://blog.nbplus.eu.org/articles/hexo1600/">建站指南</a><a href="https://blog.nbplus.eu.org/nav.html">网址导航</a></li>
          <li><a href="https://blog.nbplus.eu.org/sponsorWall/">来杯咖啡</a><a href="https://blog.nbplus.eu.org/comments/">留点什么</a></li>
          <li><a href="https://blog.nbplus.eu.org/about/">关于博主</a><a href="https://blog.nbplus.eu.org/archives/">文章归档</a></li>
          <li><a href="https://blog.nbplus.eu.org/categories/">文章分类</a><a href="https://blog.nbplus.eu.org/tags/">文章标签</a></li>
          <li><a href="https://blog.nbplus.eu.org/gallery/">我的相册</a><a href="https://blog.nbplus.eu.org/bangumis/">我的追番</a></li>
          <li><a href="https://blog.nbplus.eu.org/specialEffects/">一些特效</a><a href="https://blog.nbplus.eu.org/wallpaper/">一些壁纸</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>
-->

<!--耗时及占用内存开始-->
<span id="momk"></span><span id="momk" style="color: #ff0000;"></span>
<script type="text/javascript">
function NewDate(str) {
str = str.split('-');
var date = new Date();
date.setUTCFullYear(str[0], str[1] - 1, str[2]);
date.setUTCHours(0, 0, 0, 0);
return date;
}
function momxc() {
<!--这里要改成自己博客的诞生时间-->
var birthDay =NewDate("2022-04-20");
var today=new Date();
var timeold=today.getTime()-birthDay.getTime();
var sectimeold=timeold/1000
var secondsold=Math.floor(sectimeold);
var msPerDay=24*60*60*1000; var e_daysold=timeold/msPerDay;
var daysold=Math.floor(e_daysold);
var e_hrsold=(daysold-e_daysold)*-24;
var hrsold=Math.floor(e_hrsold);
var e_minsold=(hrsold-e_hrsold)*-60;
var minsold=Math.floor((hrsold-e_hrsold)*-60); var seconds=Math.floor((minsold-e_minsold)*-60).toString();
document.getElementById("momk").innerHTML = "这个快乐的小窝已经在互联网上飘荡了"+daysold+"天"+hrsold+"小时"+minsold+"分"+seconds+"秒"+"，真是太不容易了<br>";
setTimeout(momxc, 1000);
}momxc();
</script>
<style>
#momk{animation:change 10s infinite;font-weight:800; }
@keyframes change{0%{color:#5cb85c;}25%{color:#556bd8;}50%{color:#e40707;}75%{color:#66e616;}100% {color:#67bd31;}}
</style>
<?php printf(' | 耗时 %.3f 秒 | 查询 %d 次 | 内存 %.2f MB |',timer_stop( 0, 3 ),get_num_queries(),memory_get_peak_usage() / 1024 / 1024);?><br>
<!--耗时及占用内存结束-->
<!--萌ICP备案-->
<img style="width:23px;height:23px;" src="https://blog.nbplus.eu.org/img/meng.png"/>
<a href="https://icp.gov.moe/?keyword=20236688" target="_blank">萌ICP备20236688号</a>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.0/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>
<script class="next-config" data-name="chatra" type="application/json">{"enable":"fasle","async":true,"id":"hehysh@163.com"}</script>
<script src="/js/third-party/chat/chatra.js"></script>
<script async src="https://call.chatra.io/chatra.js"></script>



  <script src="/js/third-party/fancybox.js"></script>


  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.0/katex.min.css" integrity="sha256-uik/hNqHWZldXh/0K35nqOSCff9F61/ZOFReqNOBgB0=" crossorigin="anonymous">
  <script class="next-config" data-name="katex" type="application/json">{"copy_tex_js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.0/contrib/copy-tex.min.js","integrity":"sha256-Us54+rSGDSTvIhKKUs4kygE2ipA0RXpWWh0/zLqw3bs="}}</script>
  <script src="/js/third-party/math/katex.js"></script>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/quicklink/2.2.0/quicklink.umd.js" integrity="sha256-4kQf9z5ntdQrzsBC3YSHnEz02Z9C1UeW/E9OgnvlzSY=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"ignores":null,"url":"https://blog.nbplus.eu.org/posts/undefined.html"}</script>
  <script src="/js/third-party/quicklink.js"></script>
<script class="next-config" data-name="waline" type="application/json">{"lang":"zh-cn","enable":true,"serverURL":"waline.nbplus.eu.org","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":true,"pageview":false,"dark":"body.darkmode--activated","locale":{"placeholder":"Hi~欢迎留言呀！自由发言，开阔脑洞吧。请注意礼貌发言哦~不登录，不填昵称邮箱也没关系哒"},"avatar":"mm","meta":["nick","mail"],"pageSize":20,"visitor":true,"comment_count":true,"requiredFields":["nick"],"libUrl":"https://unpkg.com/@waline/client@v2/dist/waline.js","login":"enable","emoji":["https://unpkg.com/@waline/emojis@1.0.1/weibo","https://unpkg.com/@waline/emojis@1.0.1/alus","https://unpkg.com/@waline/emojis@1.0.1/bilibili","https://unpkg.com/@waline/emojis@1.0.1/tieba","https://unpkg.com/@waline/emojis@1.0.1/tw-emoji"],"el":"#waline","comment":true,"path":"/posts/undefined.html"}</script>
<link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css">
<script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() =>
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => 
    Waline.init(Object.assign({}, CONFIG.waline,{ el: document.querySelector(CONFIG.waline.el) }))
  );
});
</script>
<!--

<div id="RightDownBtn">
    <a id="btn" href="javascript:void(0)" target="_self" style="" title="回到顶部">
        <svg style=" width: 1.5em;height: 1.5em;" class="icon" aria-hidden="true">
            <use xlink:href="#icon-xuanfufanhuidingbu">
                <svg id="icon-xuanfufanhuidingbu" viewBox="0 0 1024 1024">
                    <path d="M0 512c0 282.624 229.376 512 512 512s512-229.376 512-512S794.624 0 512 0 0 229.376 0 512z"
                        fill="#1989FA"></path>
                    <path
                        d="M736.768 263.68H287.232c-12.288 0-23.04 10.752-23.04 23.04s10.752 23.04 23.04 23.04H737.28c12.288 0 23.04-10.752 23.04-23.04s-10.752-23.04-23.552-23.04m-207.872 105.472c-1.536-1.536-4.608-4.608-7.68-4.608-3.072-1.536-6.144-1.536-7.68-1.536-3.072 0-6.144 0-7.68 1.536-3.072 1.536-4.608 3.072-7.68 4.608l-186.368 186.368c-9.216 9.216-9.216 23.04 0 32.768 9.216 9.216 23.04 9.216 32.768 0l145.92-145.92V737.28c0 12.288 10.752 23.04 23.04 23.04s23.04-10.752 23.04-23.04V442.368l145.92 145.92c4.608 4.608 10.752 6.144 16.896 6.144 6.144 0 12.288-1.536 16.896-6.144 9.216-9.216 9.216-23.04 0-32.768l-187.392-186.368z"
                        fill="#FFFFFF"></path>
                </svg>
            </use>
        </svg>
    </a>
	<a onclick="switchNightMode()" title="深色模式">
		<svg style=" width: 1.5em;height: 1.5em;" class="icon" aria-hidden="true">
			<use id="modeicon" xlink:href="#icon-_moon">
			</use>
		</svg>
	</a>
	<svg aria-hidden="true" style="position: absolute; width: 0px; height: 0px; overflow: hidden;">
		<symbol id="icon-sun" viewBox="0 0 1024 1024">
			<path
				d="M511.99976 511.99976m-511.99976 0a511.99976 511.99976 0 1 0 1023.99952 0 511.99976 511.99976 0 1 0-1023.99952 0Z"
				fill="#91D2F2"></path>
			<path
				d="M144.623932 868.455593C237.679889 964.327548 367.831828 1023.99952 511.99976 1023.99952c269.983873 0 490.99977-209.007902 510.455761-474.031778C956.991551 535.703749 887.559584 527.999753 815.623618 527.999753c-309.535855 0-572.895731 142.055933-670.999686 340.45584z"
				fill="#198058"></path>
			<path
				d="M979.623541 575.99973c-351.319835 0-647.791696 155.655927-741.279653 368.639827A509.359761 509.359761 0 0 0 511.99976 1023.99952c260.839878 0 475.967777-195.111909 507.799762-447.31979a1194.34344 1194.34344 0 0 0-40.175981-0.68z"
				fill="#1E9969"></path>
			<path
				d="M69.711967 769.831639C158.503926 921.815568 323.271848 1023.99952 511.99976 1023.99952a509.455761 509.455761 0 0 0 269.631874-76.783964C657.111692 828.375612 464.271782 751.999648 247.623884 751.999648c-61.575971 0-121.183943 6.271997-177.911917 17.831991z"
				fill="#6AA33A"></path>
			<path
				d="M487.887771 1023.39152c-86.543959-122.151943-236.911889-214.679899-417.591804-252.543881 85.11996 144.919932 239.415888 244.279885 417.591804 252.543881z"
				fill="#95E652"></path>
			<path
				d="M394.159815 167.999921l-45.255979 45.255979L303.647858 167.999921l45.255978-45.255979zM394.159815 503.999764l-45.255979 45.255979L303.655858 503.999764l45.247978-45.247979z"
				fill="#FFF8E6"></path>
			<path
				d="M180.879915 290.719864l45.247979 45.247979-45.255979 45.255978-45.255979-45.255978zM516.903758 290.719864l45.247978 45.247979-45.247978 45.247978-45.247979-45.247978z"
				fill="#FFF8E6"></path>
			<path d="M198.087907 185.207913h63.99997v63.99997h-63.99997zM435.671796 422.791802h63.99997v63.99997h-63.99997z"
				fill="#FFF8E6"></path>
			<path d="M198.087907 422.791802h63.99997v63.99997h-63.99997zM435.671796 185.207913h63.99997v63.99997h-63.99997z"
				fill="#FFF8E6"></path>
			<path
				d="M348.879836 335.999843m-183.999913 0a183.999914 183.999914 0 1 0 367.999827 0 183.999914 183.999914 0 1 0-367.999827 0Z"
				fill="#FFEAB3"></path>
			<path
				d="M348.879836 335.999843m-159.999925 0a159.999925 159.999925 0 1 0 319.99985 0 159.999925 159.999925 0 1 0-319.99985 0Z"
				fill="#FFDC80"></path>
		</symbol>
		<symbol id="icon-_moon" viewBox="0 0 1024 1024">
			<path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#323232"></path>
			<path
				d="M512 512m-407.005867 0a407.005867 407.005867 0 1 0 814.011734 0 407.005867 407.005867 0 1 0-814.011734 0Z"
				fill="#494A4A"></path>
			<path
				d="M748.1344 633.9584c0-1.143467 0.085333-2.286933 0.085333-3.413333a69.512533 69.512533 0 0 0-8.823466-33.979734q-1.058133-1.911467-2.2528-3.7376l-0.187734-0.3072a70.485333 70.485333 0 0 0-5.2736-7.099733l-0.238933-0.273067q-1.3312-1.536-2.730667-3.003733l-0.3072-0.324267a70.894933 70.894933 0 0 0-6.417066-5.819733l-0.5632-0.443733q-1.467733-1.160533-3.003734-2.235734l-0.494933-0.341333q-1.706667-1.2288-3.6352-2.3552l-0.256-0.136533q-1.706667-0.989867-3.413333-1.8944l-0.887467-0.4608q-1.604267-0.802133-3.242667-1.536l-0.6144-0.273067q-1.928533-0.836267-3.9424-1.553067l-0.8192-0.273066a54.8864 54.8864 0 0 0-3.242666-1.024l-1.143467-0.324267a85.248 85.248 0 0 0-3.601067-0.887467l-0.546133-0.119466a67.345067 67.345067 0 0 0-4.1984-0.733867l-1.143467-0.136533q-1.706667-0.2048-3.2768-0.341334l-1.245866-0.1024a74.786133 74.786133 0 0 0-4.386134-0.1536 69.8368 69.8368 0 0 0-20.48 3.037867 104.106667 104.106667 0 0 0-12.1344-11.076267 258.696533 258.696533 0 0 0-449.9456-248.763733 183.1424 183.1424 0 0 1 106.939734-34.2528c5.12 0 10.24 0.221867 15.36 0.631467a183.125333 183.125333 0 0 1 50.5344 11.52h0.170666q3.874133 1.501867 7.68 3.157333l0.256 0.1024 7.441067 3.413333 0.273067 0.136534q3.669333 1.826133 7.253333 3.805866l0.221867 0.119467q3.618133 2.013867 7.133866 4.164267a184.610133 184.610133 0 0 1 26.760534 20.036266h0.085333q2.986667 2.696533 5.870933 5.5296l0.324267 0.3072q2.781867 2.7648 5.461333 5.632l0.443734 0.477867q2.6112 2.833067 5.12 5.768533l0.494933 0.580267q2.4576 2.9184 4.795733 5.956267l0.494934 0.648533q2.321067 3.037867 4.522666 6.178133l0.426667 0.6144q2.2016 3.1744 4.283733 6.4512l0.324267 0.529067q2.116267 3.413333 4.078933 6.826667l0.170667 0.3072c1.553067 2.7136 3.0208 5.495467 4.437333 8.2944a56.149333 56.149333 0 0 0-12.578133 2.304 82.824533 82.824533 0 0 0-134.007467 18.039466 42.530133 42.530133 0 0 0-53.009066 41.079467 104.277333 104.277333 0 0 0-42.2912 80.110933 13.653333 13.653333 0 0 0 0 1.4336v0.426667c0 0.136533 0.1024 0.682667 0.187733 1.024s0 0.3072 0.1024 0.4608 0.2048 0.733867 0.324267 1.092267l0.1024 0.3072a15.36 15.36 0 0 0 0.580266 1.416533l0.1024 0.187733a16.520533 16.520533 0 0 0 0.648534 1.211734l0.221866 0.3584c0.221867 0.3584 0.4608 0.733867 0.7168 1.092266l0.221867 0.3072a26.333867 26.333867 0 0 0 2.338133 2.798934l0.119467 0.119466q0.6144 0.631467 1.297067 1.262934l0.2048 0.187733q0.7168 0.648533 1.501866 1.297067 1.706667 1.416533 3.720534 2.781866c0.6656 0.4608 1.348267 0.904533 2.065066 1.348267 26.914133 16.7936 87.995733 28.535467 159.044267 28.535467 19.3536 0 37.956267-0.8704 55.3472-2.474667l-0.494933 0.750933-0.426667 0.6144q-2.2016 3.140267-4.539733 6.178134l-0.477867 0.631466q-2.338133 3.037867-4.795733 5.956267l-0.494934 0.580267q-2.491733 2.935467-5.12 5.7856l-0.443733 0.477866q-2.679467 2.884267-5.461333 5.649067l-0.3072 0.290133q-2.884267 2.833067-5.870934 5.546667a184.8832 184.8832 0 0 1-26.7776 20.036267q-3.515733 2.167467-7.150933 4.181333l-0.187733 0.1024q-3.584 1.979733-7.2704 3.805867l-0.256 0.136533q-3.6864 1.826133-7.458134 3.413333l-0.238933 0.1024q-3.805867 1.706667-7.68 3.157334h-0.136533a183.057067 183.057067 0 0 1-50.551467 11.52c-5.12 0.4096-10.24 0.631467-15.36 0.631466a183.159467 183.159467 0 0 1-106.939733-34.2528 258.5088 258.5088 0 0 0 180.138666 107.093334 109.550933 109.550933 0 0 0-3.259733 26.453333 16.520533 16.520533 0 0 0 0.1024 1.706667v0.529066c0 0.170667 0.136533 0.853333 0.221867 1.262934l0.136533 0.5632 0.392533 1.365333 0.136534 0.4096a13.892267 13.892267 0 0 0 0.733866 1.706667l0.119467 0.238933c0.238933 0.512 0.512 1.006933 0.802133 1.501867l0.273067 0.443733q0.4096 0.682667 0.887467 1.365333l0.273066 0.375467a33.0752 33.0752 0 0 0 2.9184 3.413333l0.1536 0.1536 1.5872 1.553067 0.273067 0.256 1.8432 1.621333q2.116267 1.706667 4.625067 3.413334l2.56 1.706666c33.467733 20.8896 109.431467 35.4816 197.802666 35.4816 119.330133 0 216.046933-26.606933 216.046934-59.409066a131.413333 131.413333 0 0 0-56.285867-102.058667z"
				fill="#323232"></path>
			<path
				d="M573.8496 401.8176v-2.781867a56.200533 56.200533 0 0 0-72.6016-53.725866 82.824533 82.824533 0 0 0-134.007467 18.039466 42.530133 42.530133 0 0 0-53.009066 41.079467 104.277333 104.277333 0 0 0-42.257067 80.0768c0 26.385067 77.7728 47.786667 173.7216 47.786667s173.7216-21.384533 173.7216-47.786667a105.659733 105.659733 0 0 0-45.568-82.688z"
				fill="#CDCCCA"></path>
			<path
				d="M293.768533 506.2656a104.277333 104.277333 0 0 1 42.2912-80.110933 42.530133 42.530133 0 0 1 53.009067-41.079467 82.807467 82.807467 0 0 1 134.007467-18.039467 56.32 56.32 0 0 1 43.758933 4.642134 56.2176 56.2176 0 0 0-65.518933-26.4192 82.824533 82.824533 0 0 0-134.007467 18.039466 42.530133 42.530133 0 0 0-53.009067 41.079467 104.277333 104.277333 0 0 0-42.325333 80.128c0 8.413867 7.936 16.3328 21.845333 23.210667a13.294933 13.294933 0 0 1-0.0512-1.450667z"
				fill="#E8E9EC"></path>
			<path
				d="M453.4784 166.912a258.338133 258.338133 0 0 0-210.944 108.919467 183.995733 183.995733 0 1 1 0 299.451733 258.6624 258.6624 0 1 0 210.944-408.388267z"
				fill="#DDAE2A"></path>
			<path
				d="M364.834133 608.9216q7.594667 0.631467 15.36 0.648533a183.995733 183.995733 0 0 0 0-367.9744q-7.748267 0-15.36 0.631467a183.995733 183.995733 0 0 1 0 366.6944z"
				fill="#EDC849"></path>
			<path
				d="M794.7776 605.969067c0-1.143467 0.085333-2.286933 0.085333-3.413334a69.973333 69.973333 0 0 0-90.299733-66.833066 102.997333 102.997333 0 0 0-166.656 22.4256 52.906667 52.906667 0 0 0-65.928533 51.0976 129.706667 129.706667 0 0 0-52.599467 99.6352c0 32.8192 96.733867 59.409067 216.046933 59.409066s216.046933-26.606933 216.046934-59.409066a131.413333 131.413333 0 0 0-56.695467-102.912z"
				fill="#CDCCCA"></path>
			<path
				d="M446.481067 735.914667a129.706667 129.706667 0 0 1 52.599466-99.6352 52.906667 52.906667 0 0 1 65.928534-51.080534 102.997333 102.997333 0 0 1 166.6048-22.442666 69.973333 69.973333 0 0 1 54.408533 5.7856 69.973333 69.973333 0 0 0-81.476267-32.853334 102.997333 102.997333 0 0 0-166.656 22.4256 52.906667 52.906667 0 0 0-65.928533 51.0976 129.706667 129.706667 0 0 0-52.599467 99.6352c0 10.478933 9.864533 20.309333 27.170134 28.859734a17.408 17.408 0 0 1-0.0512-1.792z"
				fill="#E8E9EC"></path>
		</symbol>
	</svg>
    <a onclick="music_on();" id="musicmobbtn" title="播放背景音乐">
        <svg style=" width: 1.5em;height: 1.5em;" id="music" aria-hidden="true">
            <use id="modeicon" xlink:href="#icon-icon-music">
                <svg id="icon-icon-music" viewBox="0 0 1024 1024">
                    <path
                        d="M997.45185173 512A485.45185173 485.45185173 0 1 1 26.54814827 512a485.45185173 485.45185173 0 0 1 970.90370346 0"
                        fill="#9025FC"></path>
                    <path
                        d="M478.56450347 602.59745173S403.9869632 545.19277013 369.03442987 537.78962987c-82.1020448-17.41558507-136.47265173 35.8020736-133.37789654 106.192592 4.36906667 100.42785173 127.37042987 123.85090347 194.66619307 111.3505184 67.3564448-12.37902187 101.09534827-57.04059307 108.86257707-111.83597014 7.76722987-54.79537813 46.84610347-263.9037632 46.84610346-263.9037632s66.26417813 61.28829653 85.2574816 82.3447712c26.4571264 29.3698368-0.1820448 79.85682987-0.18204373 79.8568288s72.39300693-12.07561493 90.23336213-104.97896213c12.31834027-64.1403264-23.36237013-76.64071147-65.71804373-110.37961493-82.76954027-65.7787264-121.2416-90.2940448-145.63555627-95.45197014-24.27259307-5.0972448-45.02565973 4.42974827-45.8145184 81.4952288-0.84954027 77.0654816-25.60758507 290.1181632-25.60758506 290.1181632"
                        fill="#FFFFFF"></path>
                </svg>
            </use>
        </svg>
    </a>
	<audio id="bg_music" src="https://onedrive.nbplus.eu.org/api/raw/?path=/%E9%9F%B3%E4%B9%90/Sweden-C418.mp3" loop="loop"></audio>
	<script>
			
		function music_on() {
			var audio1 = document.getElementById('bg_music');
			if (audio1.paused) {
				audio1.play();
				$("svg#music").addClass("xuanzhuan");
				
			}else{
				audio1.pause();
				$('svg#music').removeClass("xuanzhuan");
				audio1.currentTime = 0;//音乐从头播放
			}
		}
	    function BackTOP() {
			$("#btn").hide();
			$(function () {
				$(window).scroll(function () {
					if ($(window).scrollTop() > 50) {
						$("#btn").fadeIn(200);
					} else {
						$("#btn").fadeOut(200);
					}
				});
				$("#btn").click(function () {
					$('body,html').animate({
							scrollTop: 0
						},
						500);
					return false;
				});
			})
		}
		function scrollToComment() {
		  var t = $("#waline-comment").offset().top;
		  $("html,body").animate({ scrollTop: t }, 500);
		}	
		function switchNightMode() {
		  $(
			'<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>'
		  ).appendTo($("body")),
			setTimeout(function () {
			  var DarkMode =
				document.cookie.replace(
				  /(?:(?:^|.*;\s*)DarkMode\s*\=\s*([^;]*).*$)|^.*$/,
				  "$1"
				) || "0";
			  DarkMode == "0"
				? ($("html").addClass("DarkMode"),
				  (document.cookie = "DarkMode=1;path=/"),
				  console.log("夜间模式开启"),
				  $("#modeicon").attr("xlink:href", "#icon-sun"))
				: ($("html").removeClass("DarkMode"),
				  (document.cookie = "DarkMode=0;path=/"),
				  console.log("夜间模式关闭"),
				  $("#modeicon").attr("xlink:href", "#icon-_moon")),
				setTimeout(function () {
				  $(".Cuteen_DarkSky").fadeOut(1e3, function () {
					$(this).remove();
				  });
				}, 2e3);
			}),
			50;
		}
 
		function checkNightMode() {
		  if ($("html").hasClass("n-f")) {
			$("html").removeClass("day");
			$("html").addClass("DarkMode");
			$("#modeicon").attr("xlink:href", "#icon-sun");
			return;
		  }
		  if ($("html").hasClass("d-f")) {
			$("html").removeClass("DarkMode");
			$("html").addClass("day");
			$("#modeicon").attr("xlink:href", "#icon-_moon");
 
			return;
		  }
		  if (
			document.cookie.replace(
			  /(?:(?:^|.*;\s*)DarkMode\s*\=\s*([^;]*).*$)|^.*$/,
			  "$1"
			) === ""
		  ) {
			if (new Date().getHours() >= 23 || new Date().getHours() < 7) {
			  $("html").addClass("DarkMode");
			  document.cookie = "DarkMode=1;path=/";
			  console.log("夜间模式开启");
			  $("#modeicon").attr("xlink:href", "#icon-sun");
			} else {
			  $("html").removeClass("DarkMode");
			  document.cookie = "DarkMode=0;path=/";
			  console.log("夜间模式关闭");
			  $("#modeicon").attr("xlink:href", "#icon-_moon");
			}
		  } else {
			var DarkMode =
			  document.cookie.replace(
				/(?:(?:^|.*;\s*)DarkMode\s*\=\s*([^;]*).*$)|^.*$/,
				"$1"
			  ) || "0";
			if (DarkMode == "0") {
			  $("html").removeClass("DarkMode");
			  $("#modeicon").attr("xlink:href", "#icon-_moon");
			} else if (DarkMode == "1") {
			  $("html").addClass("DarkMode");
			  $("#modeicon").attr("xlink:href", "#icon-sun");
			}
		  }
		}
		BackTOP();		
		checkNightMode();
	</script>
</div>
-->


<!--

<script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'shier-blog/blog'
  };
</script>
<script src="https://cdn.jsdelivr.net/gh/WillCAI2020/cdn@1.3.3/js/sidecar.min.js" async defer></script>

-->

<div id="waline-recent"></div>
<script type="module">
  import { RecentComments } from 'https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.mjs';

  RecentComments({
    el: '#waline-recent',
    serverURL: 'waline.nbplus.eu.org',
    count: 10,
  });
</script>
<!-- hexo injector body_end start -->
  <script src="/js/custom.js"></script>
<!-- hexo injector body_end end --></body>
</html>
